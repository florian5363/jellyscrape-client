<!doctype html>
<html>
<head>
    <title>
        {% if show %}
            {{ show['Name'] }} – Seasons
        {% elif shows %}
            {{ library_name }} – Shows
        {% else %}
            Library
        {% endif %}
    </title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>


<body>

{% if show %}
    <h1>{{ show['Name'] }} – Seasons</h1>

    <div class="grid">
        {% for season in seasons %}
        <div class="card">
            <a href="{{ url_for('season', library_name=library_name, season_id=season['Id']) }}">
                <img src="{{ season.get('ImageUrl') or '' }}" alt="{{ season['Name'] }}">
            </a>

            <div class="card-body">
                <div class="title">
                    Season {{ season.get('IndexNumber', '?') }}
                </div>

                <form action="{{ url_for('download_season', library_name=library_name, season_id=season['Id']) }}" method="get">
                    <button class="btn" type="submit">
                        Download Season
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>

    <br>
    <a href="{{ url_for('library', library_name=library_name) }}" class="back-link">← Back to shows</a>

{% elif shows %}
    <h1>{{ library_name }} – Shows</h1>

    <div class="grid">
        {% for show in shows %}
        <div class="card">
            <a href="{{ url_for('show', library_name=library_name, show_id=show['Id']) }}">
                <img src="{{ show.get('ImageUrl', '') }}" alt="{{ show['Name'] }}">
                <div class="title">{{ show['Name'] }}</div>
            </a>

            <div class="card-body">
                <form action="{{ url_for('download_show', library_name=library_name, show_id=show['Id']) }}" method="get">
                    <button class="btn" type="submit">Download Show</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Pagination controls -->
    <div class="pagination" style="margin-top: 20px; text-align: center; color: #fff; font-weight: bold;">
        {% if page > 1 %}
            <a href="{{ url_for('library', library_name=library_name, page=page-1) }}" class="btn">← Previous</a>
        {% endif %}
        <span style="margin: 0 10px;">Page {{ page }} of {{ total_pages }}</span>
        {% if page < total_pages %}
            <a href="{{ url_for('library', library_name=library_name, page=page+1) }}" class="btn">Next →</a>
        {% endif %}
    </div>

    <br>
    <a href="{{ url_for('libraries') }}" class="back-link">← Back to libraries</a>
{% endif %}



</body>
</html>
